<script src="jquery.min.js"></script>
<link rel="stylesheet" href="bootstrap.min.css">
<script type = 'text/javascript'>

function switchClass(elevator){
	if ($(elevator).hasClass('up')){
		$(elevator).addClass('down');
		$(elevator).removeClass('up');
	}
	else{
		$(elevator).addClass('up');
		$(elevator).removeClass('down');
	}
	console.log('switching class');
}
function moveElevator(elevator){
	amount = 130;
	if (elevator.hasClass('down')){
		amount = -13;
	}
	else{
		amount = +13;
	}
	$(elevator).animate({
		'top':'+='+amount.toString(),
	}, 1);
}

function drawFloors(){
	for(var i=0;i<25;i++){
		floor = document.createElement('div');
		$(floor).attr('class', 'floor');
		$(floor).attr('id', i.toString());
		$(floor).text(i);
		$('#floors').append($(floor));
	}
}
function execInstruction(elevator, instruction){
	if(instruction == 'm'){
		moveElevator($(elevator));
	}
	if(instruction == 's'){
		switchClass($(elevator));
	}
}
$(document).ready(function(){
	time = 0;
	console.log('moving floor');
	drawFloors();

	$('#step-btn').click(function(){
		prev_val = $('#moves-input').val();
		execInstruction($('#elevator1'), prev_val[0]);
		$('#moves-input').val(prev_val.substring(1));
		// now handle elevator 2
		prev_val = $('#moves-input2').val();
		execInstruction($('#elevator2'), prev_val[0]);
		$('#moves-input2').val(prev_val.substring(1));
		time += 1;
		$('#time').text(time);
	});

});
</script>

<style type = 'text/css'>
.elevator{
	left: 15px;
	top:13px;
	position: relative;
	height: 13px;
	width: 15px;
}
.down{
	background-color: red;
}
.up{
	background-color: green;
}
#elevator2{
	left:34px;
}
#elevator1{
	top: 26px;
	margin-left: 2px;
}
.elevators{
}
.floor{
	height: 13px;
	width: 15px;
	border: 1px solid black;
	font-size:8px;
	text-align:center;
}
.elevator-input{
	margin:10px;
}
</style>


<head>
</head>
<body>
	<h1>[WD] Elevator Challenge</h1>
	<div class = 'col-md-4 info-div'>
		<h3>Time: <span id ='time'>0</span></h3>
		<button id = 'step-btn' class = 'btn btn-default'>Step</button>
		<input id = 'moves-input' type = 'text' class = 'form-control elevator-input' placeholder = 'Enter elevator 1 commands here'></input>
		<input id = 'moves-input2' type = 'text' class = 'form-control elevator-input' placeholder = 'Enter elevator 2 commands here'></input>
	</div>

	<div class = 'elevators col-md-3'>
		<div class = 'elevator up' id = 'elevator1'></div>
		<div class = 'elevator up' id = 'elevator2'></div>
		<div id = 'floors' class = 'floors'></div>
	</div>
</body>